# 微信小游戏集合项目结构

## 目录结构

```
/
├── game.js                 # 主入口文件，包含游戏管理器和主菜单实现
├── utils/
│   └── gameUtils.js        # 工具函数库，包含资源加载、碰撞检测等通用功能
├── games/                  # 子游戏目录
│   ├── game1/              # 贪吃蛇游戏
│   │   └── main.js         # 贪吃蛇游戏实现
│   ├── game2/              # 2048游戏
│   │   └── main.js         # 2048游戏实现
│   └── game3/              # 飞机大战游戏
│       └── main.js         # 飞机大战游戏实现
└── images/                 # 游戏资源目录
    ├── icons/              # 游戏图标
    ├── ui/                 # UI元素
    └── game-assets/        # 游戏素材
```

## 文件说明

### 主要文件

- **game.js**: 游戏集合的主入口文件，负责初始化微信云开发环境、管理游戏生命周期、处理用户数据同步、实现积分系统和游戏解锁机制，以及渲染主菜单界面。

- **utils/gameUtils.js**: 工具函数库，提供云开发初始化、资源加载、音效控制、UI交互组件、本地存储管理、社交功能、云函数封装和游戏开发工具（如碰撞检测算法）等通用功能。

### 子游戏

1. **贪吃蛇游戏 (games/game1/main.js)**
   - 经典贪吃蛇游戏实现
   - 特性：动态难度系统、特殊食物系统、本地最高分保存
   - 控制方式：滑动屏幕控制蛇的移动方向

2. **2048游戏 (games/game2/main.js)**
   - 数字方块合并游戏
   - 特性：平滑的动画效果、本地最高分保存
   - 控制方式：滑动屏幕合并相同数字的方块

3. **飞机大战游戏 (games/game3/main.js)**
   - 经典射击游戏
   - 特性：难度递增系统、三种道具系统（生命、护盾、速射）、碰撞检测
   - 控制方式：触摸屏幕移动飞机，自动射击

## 技术实现

### 微信小游戏特性

- **分包加载**: 使用微信小游戏的分包加载功能，将三个子游戏作为分包，减小主包体积，提高加载速度。

- **云开发**: 利用微信云开发功能，实现用户数据同步、积分排行榜等功能。

- **触摸控制**: 针对移动设备优化的触摸控制系统，提供流畅的游戏体验。

### 游戏管理系统

- **GameManager类**: 管理游戏生命周期、资源加载和游戏切换。

- **积分系统**: 统一的积分系统，游戏得分会更新到云数据库，并用于解锁新游戏。

- **游戏解锁机制**: 基于用户积分解锁新游戏，提高用户粘性。

## 云函数依赖

- **login**: 用户登录和获取用户信息
- **updateScore**: 更新用户积分
- **getRanking**: 获取好友排行榜数据